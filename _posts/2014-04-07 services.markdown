---
layout: post
title:  "DHuS Services"
date:   2014-04-07 15:40:56
categories: page
---

##4 DHuS services
 DHuS services are summarized in **fig. 1 ** 


FIGURE   

# 5	PROFILE CONFIGURATIONS   
Users are organized in groups. For each group, a list of services (administration, browse/search, upload…) is available. Users and groups are also allowed to access a specific set of data and collections.   
##  5.1	Kinds of users ##
The kinds of users are listed here below:     
**Anonymous**:	a person that hasn’t an account (he never done the registration process    
**User-under-validation-process**:	a person that hasn’t already an account because he did the registration process.    
**Basic User**:	A person that has a DHuS account. He can access to the DHuS inserting his username and password in the overview panel.   
**User-uploader**:	An user that has the authorization to upload products.     
**Administrator**:	Administrator of the DHuS.

## 5.2	List of privileges ##
There is a list of privilege for every kind of user.    
### 5.2.1	USERS
TABLE 3  

### 5.2.2	ADMINISTRATOR

The Administrator user has much more privileges than the basic one; in fact he can gather any ones of these roles:  
1. **User**:  
- create    
- validate     
- modify      
- delete     
2. **Rights**:    
- give users rights on collections/products   
3. **System**: 
- email server configuration     
- email notifications       
- support team configuration      
- root super-user configuration   
4. **Collection**:   
create    
delete hierarchical collections,   
add or remove products to/from a collection   
5. **Archive**:   
- managing of available archives    
- space-disks   
- margin and eviction   
- lock products against eviction (hits & manually)   
6. **Networking**: 
- managing of remote DHuS connections

# 6 ADMINISTRATOR MANUAL  #
## 6.1	LOGIN  #
Once successfully installed the installation package, the DHuS server can be accessible online ([https://dhus.xxx.zz](https://dhus.xxx.zz "https://dhus.xxx.zz")) or on local URL [(https://localhost/]((https://localhost/ "(https://localhost/")).
The Administrator functionalities are displayed differently depending on the GUI in use: AJS GUI (accessible at [https://dhus.xxx.zz/new](https://dhus.xxx.zz/new "https://dhus.xxx.zz/new")  ) or GWT GUI.
To access the administrator panels in both cases, it is firstly necessary to login as root using the default settings. The button is displayed in the upper right side of the DHuS Home page in both of the GUIs.     

FIGURE 3 E 4   
![](https://raw.githubusercontent.com/wiki/calogera/DataHubSystem/imagessum/fig1.jpeg)


## 6.2	DHuS Panels   
The DHuS provides the Administrator a series of panels to fulfil every service. We report here how to access them using the two GUIs. Some panels are accessible just using one of the two GUIs (statistics, OData synchronizers), some others are accessible via both GUIs (user, collection, system, eviction).   
GWT GUI: Once the administrator is logged in  the following panels are displayed   
FIG 5   

Here below is reported the complete list of these panels and its eventual subsections:   
1.	**Management Panel **  
•	Users    
•	Collections    
•	Data Rights Access   
•	System    
•	Eviction   
2.	**Statistics Panel  ** 
•	Users   
•	Connection   
•	Searches   
•	Downloads   
•	Uploads   
•	Monitoring    
**AJS GUI**: Once the administrator is logged in, the management panels are accessible clicking on the **“user icon”**  on the upper right side of the page   
Here below is reported the complete list of these panels and its eventual subsections:    

1.	Management   
- Users    
- Collections    
- Data Rights Access   
- System    
- Eviction    
2.	OData synchronizers  
 
### 6.2.1 Management Panel
Here follows a brief tutorial for using the management panels via both GUIs. The available functionalities are basically the same; they are just displayed using two different technologies. 
#### User Management Panel
The administrator management panel allows managing user. This means that the administrator can create, edit and delete any user.  
FIGURE 7  E 8

DHuS implements a user management system that prevents uncontrolled accesses and manipulations from unauthorized users. DHuS proposes a user authentication and authorization strategy defined in its internal Database. Users are able to register or sign-in and the administrators are able to configure the user/group permissions from the Web user interface 

Management of users consists:    
1.	to create or delete a user;    
2.	to authorize the user to access a list of services;    
3.	to update user profile;    
 
To register a new user, the Administrator shall    

- Access the DHuS page
- Perform the login
- Select the Management Panel and then select the Users management  panel   
- Click on the “Create” button in the lower part of the User management page (DHuS User Management panel ), there will be enabled the form here below   

FIGURE 9 E 10   

- Fill in the new user creation form (note that the fields marked with a an asterisk are mandatory to be fill) and click on the desired functions that the user shall be able to use
- Click to the “save” button to complete
- Then the email notification service will send an e-mail to the user with his profile information (login, first name, last name, available services...) including a generated password.
- The administrator has the possibility to modify user’s authorizations and information.
To modify whatever authorization or item of the user, the Administrator has to: 

- Access the DHuS page
- Perform the login
- Select the Management Panel 
- Select the Users Management Panel
- Select the name of the user in the users list on the left side of the user management panel,

Now, if he wants to  
1. lock the selected user, he has to:
- Click on the “locked” checkbox under the Registration form in the right side of the panel

figure lock
- The administrator shall also indicate the reason of this locking process in the box on the right,
Example:
figure

  •	Click to the “save” button to complete,
•	Then the email notification service will send an e-mail to the user with his profile information (login, first name, last name, available services...) including locking notification and its relative reason, if it has been indicated.

2)	delete the selected user, he has to:
•	Click on the “Delete” button to delete (notice that clicking on “Cancel” button there will be just cancelled any changes made).
figure 11  12

•	Email notification service will send an e-mail to the deleted user with the communication of the deletion process. 

####	Collection Management Page
Products are gathered into collections. Management of collections consists:    
1.	to create or delete collections;    
2.	add a sub collection or a collection parent   
The Collection management panel also lists a set of products to be attached to the collection. Selection of collection is possible browsing left panel collection hierarchy. To access to the collection management panel, the Administration have to click on the “collections” link, sited in the upper left of the management panel.
There will be opened the collection management panel here below which on the left contains the list of collections and on the right the list of archived products. 

figure 13

The administrator can manage the collection: he can create new collection/subcollection and delete an existing collection/subcollection,
To do anyone of these actions, he as to:

- Access the DHuS page,
- Perform the login,
- Go to the collection management panel 
Now, if he wants to

1. Create a new collection, he/she has to:

- Click on “create” button in the collection management panel 
- There will be opened the panel in Create collection
- Insert the collection  information in the upper right of the panel (the name of collection is obligatory),
- (optional) click on the tick box of the products to be added to the collection
- Click on “save” button to register the new collection or click to “cancel” button to abort the ‘creation of collection’ procedure

- figure 14 


2)	create new sub collection, he/she has to:
- Click on the collection inside which creating the new sub collection
- Click on “sub collection” button in the collection management panel     
figure 15

•	Insert the collection  information in the upper right of the panel (the name of collection is obligatory),
•	Click on “save” button to register the new collection or click to “cancel” button to abort the ‘creation of collection’ procedure (notice that clicking on “delete” button it will be deleted the collection in which you wanted to create the sub collection)

3)	delete a collection/sub collection, he has to:
•	Click on the collection/sub collection to delete
•	There will be opened the panel in Create sub collection,
•	Click on “delete” button

Note that the collection management page is provided of a searching box. It is useful to know if a product is collected somewhere.
figure 16   
#### Data Rights Management Panel
The objective of this panel is to attributes user access right to products and collections. The panel lists the users in a left side of the panel, and collection and product in a right side. When a user is selected, it is possible to select a set of products and collections.
#### System Management Panel
The system management is used to configure basic information in the system. 

figure 17    

The Administrator from here can access the following sections:   
1. Mail configuration: In this form it is possible to configure the SMTP server address, the username, password and e-mail account details to send communications to the users  
2. Support information :  For any support information it is possible to contact the DHuS Support Team sending an e-mail to dhus@xxx.zz
3. Root configuration: from this panel it is possible to change the administrator password. To do so, insert the old passrwod, the new one and then confirm the new password. 
4. Synchronize Local archive: 
5. Restore database: in the dhus.xml file it is possible to configure DHuS so that it performs a periodical dump of the database. From this panel it is possible to restore the database dump.   
To do so perform the following steps:   
- Click on the drop-down menu in the `restore-database’ section, the list of available dump will be displayed trough a list of dates (date during which the dumps have been performed).   
- figure 18    
- Select the desired date and then click on “restore”. DHuS will automatically stop and restart. Once DHuS will be up again, it will contain just the data inserted before the selected dump date.   
#### Data Eviction    
The Data Eviction Service is responsible of removing data for maintaining Data Store sizing constraints. Maximum occupied space for each archive depends of administrator configuration.  The administrator can handle the eviction of products through the Eviction panel here below
 
figure 19   
The eviction rules are: 
1.	First In First Out (FIFO); 
2.	Least Frequently Used (LFU); 
3.	Least Recently Used (LRU). 
They can be chose through the drop-down menu named “Eviction strategy”.
LFU and LRU are defined using a system of “hit points”, calculated with the number of searches and downloads for each product. 
The service will log (in the panel on the lower side of the page) any evicted file in the Database and flag the product/entry by removing/updating its Data Store URL that is no longer relevant.
In order to activate the eviction perform the following steps:
- Access the DHuS page   
- Perform the login   
- Select the Management Panel and then select the Eviction management  panel   
- Select the Eviction strategy (Eviction panel (GWT GUI)) using the drop-down menu   
- Configure the “Maximum disk usage before eviction depending on how much of the machine space can be occupied by data before triggering the eviction (e.g.if the parameter is set to 80, when the disk will be full at 80%, the eviction will be automatically activated)   
- Configure the “Minimal keeping period for a product” parameter. This parameter represents the number of days each product will be kept in the DHuS archive before being evicted (e.g if the parameter is set to 3, the eviction will delete all the products present in the archive from more three days)   
###6.2.2	OData Synchronizers panel
The OData synchronizers panel is available just in the AJS GUI. The DHuS provides end users an OData synchronizer service able to populate a DHuS instance with the data stored on the rolling archive of another DHuS instance. The DHuS which contains the data to be synchronized is called “back end” instance, while the ones which shall receive the data is called “front end” instance. 
In case the rolling archive of the BE contains some products that are not present in the FE, once the synchronization is running, it will consist on mirroring the metadata of the products present in the BE instance that are not in the database of the FE instance. 
  
**Precondition: **   
The FE/BE instances should be configured as follows:
-	BE: DHuS instance with no quota limitation and having a user with the ‘archive management’ function enabled
-	FE: having the synchronization functionality enabled meaning that the dhus.xml of the FE shall contain the following setting:
      <executor enabled="true" batchModeEnabled="false" />
-	BE and FE shall have the incoming folders in the same filesystem
The OData Synchronizers panel allows the creation and update of synchronizers among two or more DHuS instances.
To create a new Synchronizers, the Administrator shall 
•	Log in as Root in the front end DHuS instance and select the tab “user profile”
•	Select the panel “OData synchronizers” 
fig 20
•	Click on “Create synchronizer”
fig 21 22

- Fill the records as follows:
Label= Name of the synchronizer   
- Service URL= https://[Back end DHuS address]/odata/v1   
- Service Login Username= User name of a user registered in the back end which ha the archive manager rights    
- Service Login Password= password of the user in the previous step   
- Schedule= how often the synchronizer shall be running. The syntax of the crons is explained in the dhus.xml    header **(section APPENDIX A)**   
- Remote incoming=absolute  path of the back end DHuS incoming   
- Request= “start” or “stop”    
- Page size= number of products synchronized at each synchronizer run   
- Click on the button with the “floppy disk” shape   
To update a Synchronizer, the Administrator shall    
- Log in as Root in the front end DHuS instance and select the tab “user profile”   
- Select the panel “OData synchronizers”  and the click on the “pencil” next to the synchronizer to be updated   
figure 23.   

- Edit the records to be updated
- Click on the button with the “floppy disk” shape
To delete a Synchronizer, the Administrator shall 
- Log in as Root in the front end DHuS instance and select the tab “user profile”
- Select the panel “OData synchronizers”  and the click on the “X” shaped button next to the synchronizer to be updated   
Next to an existing synchronizer tab there are also the buttons for starting and stopping the item. The “play” button is to start the synchronizer; the “square” button is to stop it.
It is possible to create, delete and update a synchroniser also from command line. Please check the **APPENDIX B** for details
###6.2.3	Statistics Panel
The Statistic panel provided by DHuS allows monitoring the activities and connections handled by the software during a certain time-span. To enable these functions, it is necessary to insert in the start.sh the following line:
`-Daction.record.inactive=false`

The Statistics panel is dedicated to the monitoring of the service activity through operation statuses
and statistics. Most of these values are extracted from the DHuS Database that is fed regularly by any
interested service but in particular by the dedicated DHuS Monitoring Service.
This page is dynamic and, as such, displays fresh data collected from the DHuS Database selected according to configurable parameters. Those parameters include the time extent of the collected data,
the grouping baselines i.e. week, month or year baseline, the axis among collections or users.
As much as relevant, the page will make use of graphical charts executed on the client. Here below we provide a list of the available Statistic panels.
---
layout: post
title:  "DHuS Services"
date:   2014-02-03 15:40:56
categories: page
---

####	Users
The User statistics panel provides a quantitative and graphical view of the active users which make use of DHuS. It is possible to choose 
- the time-span for which displaying the statistics
- the kind of users (depending on the activities they carry on)
- the results format (e.g. per day, per hour)

figu 24

####	Connections
The connection statistics panel provides a quantitative and graphical view of the connections handled by DHuS during a certain time span. It is possible to choose    
- the time-span for which displaying the statistics   
- the kind of connections (depending on the domain, the usage or the user)   
- the results format (e.g. per day, per hour)  
- fig 25 
####	Searches
The searches statistics panel provides a quantitative and graphical view of the data requested by users during a certain time span. It is possible to choose    
- the time-span for which displaying the statistics   
- the kind of search (depending on the domain, the usage or the user)   
- the results format (e.g. per day, per hour)   
fig 26

#### Downloads
The download statistics panel provides a quantitative and graphical view of the data requested by users during a certain time span. It is possible to choose 
-the time-span for which displaying the statistics   
-the kind of download (depending on the domain, the usage or the user)   
-the results format (e.g. per day, per hour)    

   fig 27
####	Monitoring
The monitoring panel provides an overview of the status of the system from the Server to the database. Most importantly it is possible to have a view of the tasks which DHuS has in schedule (e.g. eviction, file scanners etc.). The Monitoring panel is dedicated to the monitoring of the service activity through operation statuses. This page is dynamic and, as such, displays fresh data collected from the DHuS Database. 
 fig 28




